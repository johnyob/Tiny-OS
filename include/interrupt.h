////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// - Alistair O'Brien - 7/11/2020 - University of Cambridge
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//      File:        interrupt.h
//      Environment: Tiny OS
//      Description: Contains the procedure prototypes for the PLIC initialize and handle interrupt
//                   and the CLINT initialize and handle interrupt.
//                   Also contains the START and SIZE mmio symbols for the PLIC and CLINT.
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#ifndef TINY_OS_INTERRUPT_H
#define TINY_OS_INTERRUPT_H

#include <lib/stdint.h>

#include <trap.h>

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// PLIC                                                                                                               //
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#define PLIC_START          (0xc000000L)
#define PLIC_SIZE           (0x4000000L)

void plic_init();
void plic_hart_init();

void plic_handle_interrupt(trap_frame_t* tf);

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// CLINT                                                                                                              //
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#define CLINT_START         (0x2000000L)
#define CLINT_SIZE          (0x10000L)

void clint_hart_init();

#endif //TINY_OS_INTERRUPT_H
